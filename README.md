# P Server

Необходимые для работы функции сервера:

* система пользователей: 
  * управление пользователями,
  * управление группами пользователей,
  * управление полномочиями, 
  * авторизация: вход в систему, 
  * аутентификация: проверка полномочий при доступе к серверу
  * информация: вернуть сведения о текущем пользователе 

* описание пользовательской модели:
  * пользовательские объекты в системе с функциями:
    * CRUD
    * поиск, 
    * фильтр

(!) TODO:

* разобраться с форматом отображения чисел. У react admin сложная система форматирования, основанная на
[NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat)
и описана в [NumberFiels](https://marmelab.com/react-admin/NumberField.html)
* Разобраться со ссылками на ресурсы про декларировании моделей. Сейчас ссылки не проверяются. Нужно на этапе 
инициализации системы делать этап проверки ссылок в моделях (поля ref) - и выдавать ошибку при отсутствии нужной модели.
* Подумать над типом свойства модели enum - чтобы была возможность описания перечислений и сохранения в базе не 
значений, а их кодов
* (fixed) product-stock, (+) date поля не все импортированы; (+) resource-stock, проблема с датами при seed файла
* (?) resource: зачем minOrder и orderPeriod - если это зависит от поставщика -> решить; зачем initialDate у ресурса?
 зачем defPrice если есть складская цена и цена у поставщика? initialDate? 
* (!) разобраться с различными форматами даты при импорте seed файлов и работе с разными источниками - придумать как 
делать настройку (в seed файле, в описании поля дата и тп) 

## TODO

* codegen: развиваем модуль, текущие идеи:
  * роут для генерации кода для app.js (все ресурсы перечисляем, или предоставляем для генерации перечень ресурсов)
    * /app-imports: генерация кода для импорта модулей, включая иконки;
    * /app-resources: генерация списка ресурсов;
  * генерация полного модуля для модели: 
    * делаем компоненты List, Edit и Create, вместе со всеми вспомогательными компонентами (фильтр, заголовок)
    * с перечнем всех полей, с отработкой типа полей;
    * для генерации возможно передать опции (через параметр запроса роута)
    * делаем систему автоматического обновления сгенерированного контента через сниппеты внутри кода, а также консольную утилиту, 
которая подключается к серверу, генерирует код в промежуточные файлы, обновляет код внутри приложения; утилита ведет
учет diff между различными сниппетами и текущим состоянием сниппета при последнем обновлении. Если код был обновлен, 
то выдается ошибка обновления. 
     
* exModular: добавить в routeBuilder возможность добавления обработчиков до стандартных before, after в разные события;

* plan:

* exModular: добавить генерацию первичных ключей, а также внешних ключей. 
* добавить отключение 
